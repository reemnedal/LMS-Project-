{"version":3,"file":"js/llms-admin-award-certificate.js","mappings":"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","sources":["webpack://lifterlms/./src/js/util/award-certificate-button/create.js","webpack://lifterlms/./src/js/util/award-certificate-button/index.js","webpack://lifterlms/./src/js/util/award-certificate-button/message.js","webpack://lifterlms/./src/js/util/award-certificate-button/urls.js","webpack://lifterlms/./src/js/util/edit-certificate-title.js","webpack://lifterlms/./src/js/util/index.js","webpack://lifterlms/external window [\"llms\",\"components\"]","webpack://lifterlms/external window [\"llms\",\"utils\"]","webpack://lifterlms/external window [\"wp\",\"components\"]","webpack://lifterlms/external window [\"wp\",\"coreData\"]","webpack://lifterlms/external window [\"wp\",\"data\"]","webpack://lifterlms/external window [\"wp\",\"editor\"]","webpack://lifterlms/external window [\"wp\",\"element\"]","webpack://lifterlms/external window [\"wp\",\"i18n\"]","webpack://lifterlms/external window [\"wp\",\"url\"]","webpack://lifterlms/webpack/bootstrap","webpack://lifterlms/webpack/runtime/compat get default export","webpack://lifterlms/webpack/runtime/define property getters","webpack://lifterlms/webpack/runtime/hasOwnProperty shorthand","webpack://lifterlms/webpack/runtime/make namespace object","webpack://lifterlms/./src/js/admin-award-certificate.js"],"sourcesContent":["// WP deps.\nimport { store as coreStore } from '@wordpress/core-data';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Creates a new awarded certificate post for a given student with a specified parent template.\n *\n * @since 6.0.0\n *\n * @param {number} studentId  WP_User ID.\n * @param {number} templateId WP_Post ID.\n * @return {Promise<Object>} A promise that resolves to the WP_Post object api response on success.\n */\nexport default function( studentId, templateId ) {\n\tconst { saveEntityRecord } = dispatch( coreStore );\n\n\treturn saveEntityRecord(\n\t\t'postType',\n\t\t'llms_my_certificate',\n\t\t{\n\t\t\tauthor: studentId,\n\t\t\tcertificate_template: templateId,\n\t\t\tstatus: 'draft',\n\t\t}\n\t);\n}\n","// WP Deps.\nimport { __ } from '@wordpress/i18n';\nimport { Button, Modal } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n\n// LLMS Deps.\nimport { PostSearchControl, UserSearchControl } from '@lifterlms/components';\n\n// Internal Deps.\nimport createAward from './create';\nimport getMessage from './message';\nimport { getRedirectUrl, getScratchUrl } from './urls';\n\n/**\n * Button and modal interface for creating a draft certificate from a specified template for a specific student.\n *\n * @since 6.0.0\n *\n * @param {Object}  params                Component configuration object.\n * @param {string}  params.modalTitle     Title of the modal.\n * @param {string}  params.buttonLabel    Text of the button.\n * @param {boolean} params.isDisabled     Whether or not the button is disabled.\n * @param {boolean} params.enableScratch  When `true`, displays a \"Start from Scratch\" button that links to the awarded certificate editor page.\n * @param {boolean} params.selectStudent  When `true`, displays a searchable select element to allow user selection of the user.\n * @param {boolean} params.selectTemplate When `true`, displays a searchable select element to allow user selection of the template.\n * @param {?number} params.studentId      WP_User ID of the student to award the certificate to.\n * @param {?number} params.templateId     WP_Post ID of the certificate template post to create the certificate from.\n * @return {WPElement} The component.\n */\nexport default function( {\n\tmodalTitle = __( 'Award a New Certificate', 'lifterlms' ),\n\tbuttonLabel = __( 'Award', 'lifterlms' ),\n\tisDisabled = false,\n\tenableScratch = true,\n\tselectStudent = true,\n\tselectTemplate = true,\n\tstudentId = null,\n\ttemplateId = null,\n} ) {\n\tconst [ isOpen, setIsOpen ] = useState( false ),\n\t\t[ isBusy, setIsBusy ] = useState( false ),\n\t\t[ currStudentId, setStudentId ] = useState( studentId ),\n\t\t[ currTemplateId, setTemplateId ] = useState( templateId ),\n\t\tcloseModal = () => setIsOpen( false ),\n\t\topenModal = () => setIsOpen( true ),\n\t\tisReady = currStudentId && currTemplateId,\n\t\tonClick = () => {\n\t\t\tsetIsBusy( true );\n\t\t\tcreateAward( currStudentId, currTemplateId ).then( ( { id } ) => {\n\t\t\t\twindow.location = getRedirectUrl( id );\n\t\t\t} );\n\t\t};\n\n\treturn (\n\t\t<>\n\t\t\t{ isOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={ modalTitle }\n\t\t\t\t\tstyle={ { maxWidth: '420px' } }\n\t\t\t\t\tonRequestClose={ closeModal }\n\t\t\t\t>\n\n\t\t\t\t\t<p>{ getMessage( selectStudent, selectTemplate ) }</p>\n\n\t\t\t\t\t{ selectStudent && (\n\t\t\t\t\t\t<UserSearchControl\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tlabel={ __( 'Award to', 'lifterlms' ) }\n\t\t\t\t\t\t\tselectedValue={ studentId ? [ studentId ] : [] }\n\t\t\t\t\t\t\tonUpdate={ ( obj ) => {\n\t\t\t\t\t\t\t\tconst id = obj?.id || null;\n\t\t\t\t\t\t\t\tsetStudentId( id );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ selectTemplate && (\n\t\t\t\t\t\t<PostSearchControl\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tpostType=\"llms_certificate\"\n\t\t\t\t\t\t\tlabel={ __( 'Template', 'lifterlms' ) }\n\t\t\t\t\t\t\tplaceholder={ __( 'Search for a certificate template…', 'lifterlms' ) }\n\t\t\t\t\t\t\tselectedValue={ templateId ? [ templateId ] : [] }\n\t\t\t\t\t\t\tonUpdate={ ( obj ) => {\n\t\t\t\t\t\t\t\tconst id = obj?.id || null;\n\t\t\t\t\t\t\t\tsetTemplateId( id );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<div style={ { textAlign: 'right', padding: '24px 32px 0', margin: '24px -32px 0', borderTop: '1px solid #ddd' } }>\n\n\t\t\t\t\t\t<Button style={ { marginRight: '5px' } } disabled={ ! isReady } isBusy={ isBusy } variant=\"primary\" onClick={ onClick }>\n\t\t\t\t\t\t\t{ __( 'Create Draft' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t{ enableScratch && (\n\t\t\t\t\t\t\t<Button style={ { marginRight: '5px' } } variant=\"secondary\" href={ getScratchUrl( currStudentId ) }>\n\t\t\t\t\t\t\t\t{ __( 'Start from Scratch', 'lifterlms' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<Button variant=\"tertiary\" onClick={ closeModal }>\n\t\t\t\t\t\t\t{ __( 'Cancel', 'lifterlms' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t\t<Button\n\t\t\t\tdisabled={ isDisabled }\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tonClick={ openModal }\n\t\t\t>\n\t\t\t\t{ buttonLabel }\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { __ } from '@wordpress/i18n';\n\n/**\n * Retrieves the message based on the selectors present in the modal.\n *\n * @since 6.0.0\n *\n * @param {boolean} selectStudent  Whether or not the student selector is present.\n * @param {boolean} selectTemplate Whether or not the template selector is present.\n * @return {string} A message string.\n */\nexport default function( selectStudent, selectTemplate ) {\n\tlet msg = '';\n\tif ( selectStudent && selectTemplate ) {\n\t\tmsg = __( 'Create a new certificate award from the selected template for the selected student.', 'lifterlms' );\n\t} else if ( selectStudent && ! selectTemplate ) {\n\t\tmsg = __( 'Create a new certificate award from this template for the selected student.', 'lifterlms' );\n\t} else if ( ! selectStudent && selectTemplate ) {\n\t\tmsg = __( 'Create a new certificate award from the selected template for this student.', 'lifterlms' );\n\t}\n\treturn msg;\n}\n","// WP deps.\nimport { addQueryArgs } from '@wordpress/url';\n\n// LLMS deps.\nimport { getAdminUrl } from '@lifterlms/utils';\n\n/**\n * Retrieves the redirect URL for the newly created certificate.\n *\n * @since 6.0.0\n *\n * @param {number} post WP_Post ID.\n * @return {string} The edit post URL for awarded certificate draft.\n */\nexport function getRedirectUrl( post ) {\n\treturn addQueryArgs(\n\t\t`${ getAdminUrl() }/post.php`,\n\t\t{\n\t\t\tpost,\n\t\t\taction: 'edit',\n\t\t\tnewAwardMsg: 1,\n\t\t}\n\t);\n}\n\n/**\n * Retrieves the url for the \"Start from Scratch\" button.\n *\n * @since 6.0.0\n *\n * @param {?number} sid WP_User ID of the selected student.\n * @return {string} The URL.\n */\nexport function getScratchUrl( sid = null ) {\n\tconst args = {\n\t\tpost_type: 'llms_my_certificate',\n\t};\n\n\tif ( sid ) {\n\t\targs.sid = sid;\n\t}\n\n\treturn addQueryArgs(\n\t\t`${ getAdminUrl() }/post-new.php`,\n\t\targs,\n\t);\n}\n","import { dispatch, select } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * Edits the title of the current certificate post type in the block editor.\n *\n * This utility is used to allow sharing functionality between `llms_certificate` and `llms_my_certificate`\n * post types. Depending on the post type, the certificate title is stored in a different post field.\n *\n * To edit the actual post title of a `llms_certificate` post (not the awarded certificate's title), use\n * `wp.data.dispatch( 'core/editor' ).editPost()` directly.\n *\n * @since 6.0.0\n *\n * @param {string} title    The desired certificate title.\n * @param {string} postType The current post type, automatically reads it from the current post if omitted.\n * @return {Promise} Promise that resolves when the title edits have been made to the current post.\n */\nexport function editCertificateTitle( title, postType = null ) {\n\tif ( ! postType ) {\n\t\tconst { getCurrentPostType } = select( editorStore );\n\t\tpostType = getCurrentPostType();\n\t}\n\n\tconst { editPost } = dispatch( editorStore ),\n\t\tedits = {};\n\n\tif ( 'llms_certificate' === postType ) {\n\t\tedits.certificate_title = title;\n\t} else if ( 'llms_my_certificate' === postType ) {\n\t\tedits.title = title;\n\t}\n\n\treturn editPost( edits );\n}\n","export { editCertificateTitle } from './edit-certificate-title';\nexport { default as AwardCertificateButton } from './award-certificate-button';\n","module.exports = window[\"llms\"][\"components\"];","module.exports = window[\"llms\"][\"utils\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// WP deps.\nimport { render } from '@wordpress/element';\nimport { getQueryArg } from '@wordpress/url';\n\n// Internal deps.\nimport { AwardCertificateButton } from './util';\n\nconst WRAPPER_ID = 'llms-award-certificate-wrapper',\n\trenderNodeStyles = {},\n\tbuttonArgs = {},\n\tdefaultBtn = getDefaultButton();\n\n/**\n * Retrieves the DOM Element selector for the default button to be replaced by the component.\n *\n * @since 6.0.0\n *\n * @return {?Element} DOM element for the default button or null if no button found.\n */\nfunction getDefaultButton() {\n\t// Certificates post table page.\n\tlet btn = document.querySelector( '.page-title-action' );\n\tif ( btn ) {\n\t\trenderNodeStyles.top = '-3px';\n\t\trenderNodeStyles.position = 'relative';\n\t}\n\n\t// Student certificates reporting page.\n\tif ( ! btn ) {\n\t\tbtn = document.getElementById( 'llms-new-award-button' );\n\n\t\trenderNodeStyles.marginBottom = '20px';\n\t\trenderNodeStyles.display = 'inline-block';\n\n\t\tbuttonArgs.studentId = parseInt( getQueryArg( window.location, 'student_id' ) );\n\t\tbuttonArgs.selectStudent = false;\n\t}\n\n\t// Reuse the original buttons label.\n\tif ( btn ) {\n\t\tbuttonArgs.buttonLabel = btn.textContent;\n\t}\n\n\treturn btn;\n}\n\n/**\n * Inserts the wrapper element node where the new component button will be rendered.\n *\n * @since 6.0.0\n *\n * @return {boolean} Returns `false` if no default button is found, otherwise returns true.\n */\nfunction insertRenderNode() {\n\tif ( ! defaultBtn ) {\n\t\treturn false;\n\t}\n\n\tconst renderNode = document.createElement( 'span' );\n\trenderNode.id = WRAPPER_ID;\n\n\tObject.entries( renderNodeStyles ).forEach( ( [ rule, style ] ) => {\n\t\trenderNode.style[ rule ] = style;\n\t} );\n\n\tdefaultBtn.style.display = 'none';\n\tdefaultBtn.after( renderNode );\n\n\treturn true;\n}\n\n// Render the component.\nif ( insertRenderNode() ) {\n\trender( <AwardCertificateButton { ...buttonArgs } />, document.getElementById( WRAPPER_ID ) );\n}\n"],"names":["store","coreStore","dispatch","studentId","templateId","saveEntityRecord","author","certificate_template","status","__","Button","Modal","useState","PostSearchControl","UserSearchControl","createAward","getMessage","getRedirectUrl","getScratchUrl","_ref","modalTitle","buttonLabel","isDisabled","enableScratch","selectStudent","selectTemplate","isOpen","setIsOpen","isBusy","setIsBusy","currStudentId","setStudentId","currTemplateId","setTemplateId","closeModal","openModal","isReady","onClick","then","_ref2","id","window","location","createElement","Fragment","title","style","maxWidth","onRequestClose","isClearable","label","selectedValue","onUpdate","obj","postType","placeholder","textAlign","padding","margin","borderTop","marginRight","disabled","variant","href","msg","addQueryArgs","getAdminUrl","post","action","newAwardMsg","sid","arguments","length","undefined","args","post_type","select","editorStore","editCertificateTitle","getCurrentPostType","editPost","edits","certificate_title","default","AwardCertificateButton","render","getQueryArg","WRAPPER_ID","renderNodeStyles","buttonArgs","defaultBtn","getDefaultButton","btn","document","querySelector","top","position","getElementById","marginBottom","display","parseInt","textContent","insertRenderNode","renderNode","Object","entries","forEach","rule","after"],"sourceRoot":""}